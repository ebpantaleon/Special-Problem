<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0168)https://matlab-1b.mathworks.com/static/UlIPFn7h/cd6da95a-5fb5-44f5-ac4a-d4c9f136faab/Scenarios.html?snc=YAELCO&mre=https%3A%2F%2Fmatlab-1b.mathworks.com%2F&websocket=on -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>Scenarios</title>
<meta name="generator" content="MATLAB 25.2">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2025-12-06">
<meta name="DC.source" content="Scenarios.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<pre class="codeinput">clc; clear; close <span class="string">all</span>;

fis = mamfis(<span class="string">'Name'</span>, <span class="string">'Special Problem'</span>);

fis = addInput(fis, [0 60], <span class="string">'Name'</span>, <span class="string">'Queue'</span>);
fis = addMF(fis, <span class="string">'Queue'</span>, <span class="string">'trimf'</span>, [0 0 15], <span class="string">'Name'</span>, <span class="string">'Short'</span>);
fis = addMF(fis, <span class="string">'Queue'</span>, <span class="string">'trimf'</span>, [10 30 50], <span class="string">'Name'</span>, <span class="string">'Medium'</span>);
fis = addMF(fis, <span class="string">'Queue'</span>, <span class="string">'trimf'</span>, [40 60 60], <span class="string">'Name'</span>, <span class="string">'Long'</span>);

fis = addInput(fis, [0 40], <span class="string">'Name'</span>, <span class="string">'Arrival'</span>);
fis = addMF(fis, <span class="string">'Arrival'</span>, <span class="string">'trimf'</span>, [0 0 10], <span class="string">'Name'</span>, <span class="string">'Low'</span>);
fis = addMF(fis, <span class="string">'Arrival'</span>, <span class="string">'trimf'</span>, [5 20 35], <span class="string">'Name'</span>, <span class="string">'Medium'</span>);
fis = addMF(fis, <span class="string">'Arrival'</span>, <span class="string">'trimf'</span>, [30 40 40], <span class="string">'Name'</span>, <span class="string">'High'</span>);

fis = addInput(fis, [0 90], <span class="string">'Name'</span>, <span class="string">'Waiting'</span>);
fis = addMF(fis, <span class="string">'Waiting'</span>, <span class="string">'trimf'</span>, [0 0 25], <span class="string">'Name'</span>, <span class="string">'Short'</span>);
fis = addMF(fis, <span class="string">'Waiting'</span>, <span class="string">'trimf'</span>, [15 45 75], <span class="string">'Name'</span>, <span class="string">'Moderate'</span>);
fis = addMF(fis, <span class="string">'Waiting'</span>, <span class="string">'trimf'</span>, [60 90 90], <span class="string">'Name'</span>, <span class="string">'Long'</span>);

fis = addOutput(fis, [0 120], <span class="string">'Name'</span>, <span class="string">'TotalGreen'</span>);
fis = addMF(fis, <span class="string">'TotalGreen'</span>, <span class="string">'trapmf'</span>, [10 10 30 40], <span class="string">'Name'</span>, <span class="string">'Short'</span>);
fis = addMF(fis, <span class="string">'TotalGreen'</span>, <span class="string">'trapmf'</span>, [30 40 70 80], <span class="string">'Name'</span>, <span class="string">'Medium'</span>);
fis = addMF(fis, <span class="string">'TotalGreen'</span>, <span class="string">'trapmf'</span>, [60 80 120 120], <span class="string">'Name'</span>, <span class="string">'Long'</span>);

fis.DefuzzificationMethod = <span class="string">'centroid'</span>;

fuzzyrules = [
    1 1 1 1; 1 1 2 1; 1 1 3 2;
    1 2 1 1; 1 2 2 2; 1 2 3 2;
    1 3 1 2; 1 3 2 2; 1 3 3 3;
    2 1 1 2; 2 1 2 2; 2 1 3 3;
    2 2 1 2; 2 2 2 2; 2 2 3 3;
    2 3 1 2; 2 3 2 3; 2 3 3 3;
    3 1 1 2; 3 1 2 2; 3 1 3 3;
    3 2 1 2; 3 2 2 3; 3 2 3 3;
    3 3 1 3; 3 3 2 3; 3 3 3 3
];

<span class="keyword">for</span> i = 1:size(fuzzyrules, 1)
    fis = addRule(fis, [fuzzyrules(i,:) 1 1]);
<span class="keyword">end</span>

iterations = 5;
scenarios = 27;
leftshare = 0.2;
queue_ranges = [0 15; 16 45; 46 60];
arrival_ranges = [0 10; 11 30; 31 40];
waiting_ranges = [0 20; 21 60; 61 90];
queue_label = {<span class="string">'Short'</span>, <span class="string">'Medium'</span>, <span class="string">'Long'</span>};
arrival_label = {<span class="string">'Low'</span>, <span class="string">'Medium'</span>, <span class="string">'High'</span>};
waiting_label = {<span class="string">'Short'</span>, <span class="string">'Moderate'</span>, <span class="string">'Long'</span>};

results = table(<span class="string">'Size'</span>, [0 12],<span class="keyword">...</span>
    <span class="string">'VariableTypes'</span>, {<span class="string">'categorical'</span>, <span class="string">'categorical'</span>, <span class="string">'categorical'</span>, <span class="string">'double'</span>, <span class="string">'double'</span>, <span class="string">'double'</span>, <span class="string">'double'</span>, <span class="string">'double'</span>, <span class="string">'double'</span>, <span class="string">'double'</span>, <span class="string">'categorical'</span>, <span class="string">'categorical'</span>},<span class="keyword">...</span>
    <span class="string">'VariableNames'</span>, {<span class="string">'QueueLevel'</span>, <span class="string">'ArrivalLevel'</span>, <span class="string">'WaitingLevel'</span>, <span class="string">'Intersection'</span>, <span class="string">'Queue'</span>, <span class="string">'Arrival'</span>, <span class="string">'Waiting'</span>, <span class="string">'TotalGreen'</span>, <span class="string">'Through'</span>, <span class="string">'LeftTurn'</span>, <span class="string">'First'</span>, <span class="string">'Second'</span>});

<span class="keyword">for</span> s = 1:scenarios
    [W, A, Q] = ind2sub([3, 3, 3], s);

    <span class="keyword">for</span> iter = 1:iterations
        QL_NS1 = randi(queue_ranges(Q, :));
        QL_EW1 = randi(queue_ranges(Q, :));
        AR_NS1 = randi(arrival_ranges(A, :));
        AR_EW1 = randi(arrival_ranges(A, :));
        WT_NS1 = randi(waiting_ranges(W, :));
        WT_EW1 = randi(waiting_ranges(W, :));

        <span class="keyword">if</span> QL_NS1 &gt;= QL_EW1
            First = <span class="string">'NS'</span>;
            Second = <span class="string">'EW'</span>;
            QL_first = QL_NS1;
            AR_first = AR_NS1;
            WT_first = WT_NS1;
            QL_second = QL_EW1;
            AR_second = AR_EW1;
            WT_second = WT_EW1;
        <span class="keyword">else</span>
            First = <span class="string">'EW'</span>;
            Second = <span class="string">'NS'</span>;
            QL_first = QL_EW1;
            AR_first = AR_EW1;
            WT_first = WT_EW1;
            QL_second = QL_NS1;
            AR_second = AR_NS1;
            WT_second = WT_NS1;
        <span class="keyword">end</span>

        TG_first = round(evalfis(fis,[QL_first AR_first WT_first]));
        LT_first = round(TG_first * leftshare);
        LT_first = max(LT_first, 3);
        TH_first = TG_first;

        TG_second = round(evalfis(fis,[QL_second AR_second WT_second]));
        LT_second = round(TG_second * leftshare);
        LT_second = max(LT_second, 3);
        TH_second = TG_second;

        results = [results;
            {queue_label{Q}, arrival_label{A}, waiting_label{W}, 1, QL_first, AR_first, WT_first, TG_first, TH_first, LT_first, First, Second};
            {queue_label{Q}, arrival_label{A}, waiting_label{W}, 1, QL_second, AR_second, WT_second, TG_second, TH_second, LT_second, Second, First}];
       <span class="keyword">end</span>
<span class="keyword">end</span>

disp(results);

figure(<span class="string">'Name'</span>,<span class="string">'Traffic Signal Simulation (Intersection 1)'</span>,<span class="string">'NumberTitle'</span>,<span class="string">'off'</span>);
hold <span class="string">on</span>;

intersection1 = results.Intersection == 1;

plot(find(intersection1), results.TotalGreen(intersection1),<span class="string">'b-o'</span>,<span class="string">'LineWidth'</span>,1.5,<span class="string">'DisplayName'</span>,<span class="string">'Total Green Intersection 1'</span>);
plot(find(intersection1), results.LeftTurn(intersection1),<span class="string">'b--s'</span>,<span class="string">'LineWidth'</span>,1.5,<span class="string">'DisplayName'</span>,<span class="string">'Left-Turn Intersection 1'</span>);

xlabel(<span class="string">'Iteration'</span>);
ylabel(<span class="string">'Time (seconds)'</span>);
title(<span class="string">'Total Green and Left-Turn Allocation over Iterations'</span>);
legend(<span class="string">'Location'</span>,<span class="string">'best'</span>);
grid <span class="string">on</span>;
hold <span class="string">off</span>;

summary = varfun(@mean, results, <span class="keyword">...</span>
    <span class="string">'InputVariables'</span>, {<span class="string">'TotalGreen'</span>, <span class="string">'LeftTurn'</span>}, <span class="keyword">...</span>
    <span class="string">'GroupingVariables'</span>, {<span class="string">'QueueLevel'</span>, <span class="string">'ArrivalLevel'</span>, <span class="string">'WaitingLevel'</span>});

summary.Properties.VariableNames{<span class="string">'mean_TotalGreen'</span>} = <span class="string">'AvgTotalGreen'</span>;
summary.Properties.VariableNames{<span class="string">'mean_LeftTurn'</span>} = <span class="string">'AvgLeftTurn'</span>;
summary.AvgTotalGreen = round(summary.AvgTotalGreen);
summary.AvgLeftTurn  = round(summary.AvgLeftTurn);
disp(summary);
</pre>
<pre class="codeoutput">    QueueLevel    ArrivalLevel    WaitingLevel    Intersection    Queue    Arrival    Waiting    TotalGreen    Through    LeftTurn    First    Second
    __________    ____________    ____________    ____________    _____    _______    _______    __________    _______    ________    _____    ______

      Short          Low            Short              1            6         2         19           25          25           5        EW        NS  
      Short          Low            Short              1            1         5          8           24          24           5        NS        EW  
      Short          Low            Short              1            8         3         20           25          25           5        EW        NS  
      Short          Low            Short              1            5         2         17           24          24           5        NS        EW  
      Short          Low            Short              1           14         1         16           51          51          10        EW        NS  
      Short          Low            Short              1            8         8          0           25          25           5        NS        EW  
      Short          Low            Short              1            8         7         18           36          36           7        NS        EW  
      Short          Low            Short              1            3         7          7           24          24           5        EW        NS  
      Short          Low            Short              1            5         0         18           24          24           5        NS        EW  
      Short          Low            Short              1            4         3          3           23          23           5        EW        NS  
      Short          Low            Moderate           1            8         9         33           50          50          10        NS        EW  
      Short          Low            Moderate           1            0        10         30           55          55          11        EW        NS  
      Short          Low            Moderate           1           14         8         44           51          51          10        NS        EW  
      Short          Low            Moderate           1           13         5         44           46          46           9        EW        NS  
      Short          Low            Moderate           1           13         1         43           46          46           9        EW        NS  
      Short          Low            Moderate           1            6         1         41           24          24           5        NS        EW  
      Short          Low            Moderate           1            2         0         40           23          23           5        NS        EW  
      Short          Low            Moderate           1            2         4         21           25          25           5        EW        NS  
      Short          Low            Moderate           1            5         7         37           38          38           8        EW        NS  
      Short          Low            Moderate           1            4         0         54           23          23           5        NS        EW  
      Short          Low            Long               1           15        10         67           75          75          15        EW        NS  
      Short          Low            Long               1           12         4         74           66          66          13        NS        EW  
      Short          Low            Long               1           12         9         89           69          69          14        EW        NS  
      Short          Low            Long               1            3        10         73           55          55          11        NS        EW  
      Short          Low            Long               1           11         4         80           61          61          12        EW        NS  
      Short          Low            Long               1            7         5         79           55          55          11        NS        EW  
      Short          Low            Long               1            8         9         79           55          55          11        EW        NS  
      Short          Low            Long               1            3        10         90           55          55          11        NS        EW  
      Short          Low            Long               1            7         3         80           55          55          11        EW        NS  
      Short          Low            Long               1            6         0         84           55          55          11        NS        EW  
      Short          Medium         Short              1           15        20         16           55          55          11        EW        NS  
      Short          Medium         Short              1            7        30          9           24          24           5        NS        EW  
      Short          Medium         Short              1           13        22         12           46          46           9        EW        NS  
      Short          Medium         Short              1            1        25          6           24          24           5        NS        EW  
      Short          Medium         Short              1            9        12         20           43          43           9        NS        EW  
      Short          Medium         Short              1            3        15         16           28          28           6        EW        NS  
      Short          Medium         Short              1            8        21          0           24          24           5        EW        NS  
      Short          Medium         Short              1            0        16         12           24          24           5        NS        EW  
      Short          Medium         Short              1           14        14         18           51          51          10        NS        EW  
      Short          Medium         Short              1            7        30         13           24          24           5        EW        NS  
      Short          Medium         Moderate           1           14        12         30           55          55          11        EW        NS  
      Short          Medium         Moderate           1            5        28         24           53          53          11        NS        EW  
      Short          Medium         Moderate           1           13        16         24           52          52          10        EW        NS  
      Short          Medium         Moderate           1            5        11         49           55          55          11        NS        EW  
      Short          Medium         Moderate           1           13        20         42           55          55          11        NS        EW  
      Short          Medium         Moderate           1            2        16         59           55          55          11        EW        NS  
      Short          Medium         Moderate           1           13        22         40           55          55          11        EW        NS  
      Short          Medium         Moderate           1            2        20         21           46          46           9        NS        EW  
      Short          Medium         Moderate           1           11        30         22           49          49          10        NS        EW  
      Short          Medium         Moderate           1            8        21         25           55          55          11        EW        NS  
      Short          Medium         Long               1            7        20         64           55          55          11        NS        EW  
      Short          Medium         Long               1            2        23         63           55          55          11        EW        NS  
      Short          Medium         Long               1            1        19         68           55          55          11        EW        NS  
      Short          Medium         Long               1            0        19         86           55          55          11        NS        EW  
      Short          Medium         Long               1           13        11         65           76          76          15        NS        EW  
      Short          Medium         Long               1            5        25         61           55          55          11        EW        NS  
      Short          Medium         Long               1           12        16         66           69          69          14        EW        NS  
      Short          Medium         Long               1            9        24         77           55          55          11        NS        EW  
      Short          Medium         Long               1            8        24         67           55          55          11        NS        EW  
      Short          Medium         Long               1            3        18         78           55          55          11        EW        NS  
      Short          High           Short              1            4        34         12           53          53          11        EW        NS  
      Short          High           Short              1            2        31         18           37          37           7        NS        EW  
      Short          High           Short              1           10        34         19           51          51          10        EW        NS  
      Short          High           Short              1            5        37          3           55          55          11        NS        EW  
      Short          High           Short              1           15        40         10           55          55          11        EW        NS  
      Short          High           Short              1            8        35         16           55          55          11        NS        EW  
      Short          High           Short              1            3        39         13           55          55          11        EW        NS  
      Short          High           Short              1            0        35         19           55          55          11        NS        EW  
      Short          High           Short              1           13        37          2           55          55          11        EW        NS  
      Short          High           Short              1            7        34          7           53          53          11        NS        EW  
      Short          High           Moderate           1            7        36         28           55          55          11        NS        EW  
      Short          High           Moderate           1            0        40         22           55          55          11        EW        NS  
      Short          High           Moderate           1            7        40         50           55          55          11        NS        EW  
      Short          High           Moderate           1            6        37         25           55          55          11        EW        NS  
      Short          High           Moderate           1           14        35         60           85          85          17        EW        NS  
      Short          High           Moderate           1            7        37         33           55          55          11        NS        EW  
      Short          High           Moderate           1           12        34         50           69          69          14        NS        EW  
      Short          High           Moderate           1            5        36         37           55          55          11        EW        NS  
      Short          High           Moderate           1           15        34         54           86          86          17        EW        NS  
      Short          High           Moderate           1            9        39         31           55          55          11        NS        EW  
      Short          High           Long               1            7        32         70           76          76          15        NS        EW  
      Short          High           Long               1            7        32         90           76          76          15        EW        NS  
      Short          High           Long               1            4        37         61           58          58          12        EW        NS  
      Short          High           Long               1            1        34         63           63          63          13        NS        EW  
      Short          High           Long               1           15        38         79           92          92          18        EW        NS  
      Short          High           Long               1            4        40         80           93          93          19        NS        EW  
      Short          High           Long               1           11        39         70           80          80          16        EW        NS  
      Short          High           Long               1            3        32         62           65          65          13        NS        EW  
      Short          High           Long               1           13        38         70           77          77          15        NS        EW  
      Short          High           Long               1            1        35         79           93          93          19        EW        NS  
      Medium         Low            Short              1           36         2         19           55          55          11        EW        NS  
      Medium         Low            Short              1           22         3          6           55          55          11        NS        EW  
      Medium         Low            Short              1           38         4         17           55          55          11        EW        NS  
      Medium         Low            Short              1           36        10          6           55          55          11        NS        EW  
      Medium         Low            Short              1           38         9         20           55          55          11        EW        NS  
      Medium         Low            Short              1           27         7          8           55          55          11        NS        EW  
      Medium         Low            Short              1           25         3         17           55          55          11        NS        EW  
      Medium         Low            Short              1           17         9          6           55          55          11        EW        NS  
      Medium         Low            Short              1           43         0          7           55          55          11        NS        EW  
      Medium         Low            Short              1           34         7          3           55          55          11        EW        NS  
      Medium         Low            Moderate           1           40         0         23           55          55          11        EW        NS  
      Medium         Low            Moderate           1           17         9         30           55          55          11        NS        EW  
      Medium         Low            Moderate           1           27         4         29           55          55          11        EW        NS  
      Medium         Low            Moderate           1           26         7         56           55          55          11        NS        EW  
      Medium         Low            Moderate           1           23         6         47           55          55          11        EW        NS  
      Medium         Low            Moderate           1           19         6         42           55          55          11        NS        EW  
      Medium         Low            Moderate           1           38         3         49           55          55          11        NS        EW  
      Medium         Low            Moderate           1           25         5         57           55          55          11        EW        NS  
      Medium         Low            Moderate           1           25         1         22           55          55          11        NS        EW  
      Medium         Low            Moderate           1           22         3         34           55          55          11        EW        NS  
      Medium         Low            Long               1           33         9         83           92          92          18        EW        NS  
      Medium         Low            Long               1           19         9         77           92          92          18        NS        EW  
      Medium         Low            Long               1           28         2         77           93          93          19        NS        EW  
      Medium         Low            Long               1           16         2         63           65          65          13        EW        NS  
      Medium         Low            Long               1           33         7         63           65          65          13        EW        NS  
      Medium         Low            Long               1           28         9         85           92          92          18        NS        EW  
      Medium         Low            Long               1           33         7         81           92          92          18        NS        EW  
      Medium         Low            Long               1           19         3         87           92          92          18        EW        NS  
      Medium         Low            Long               1           28         8         80           91          91          18        EW        NS  
      Medium         Low            Long               1           16         3         84           92          92          18        NS        EW  
      Medium         Medium         Short              1           27        13         13           55          55          11        NS        EW  
      Medium         Medium         Short              1           23        15         12           55          55          11        EW        NS  
      Medium         Medium         Short              1           44        29         11           55          55          11        NS        EW  
      Medium         Medium         Short              1           31        15          1           55          55          11        EW        NS  
      Medium         Medium         Short              1           40        22         19           55          55          11        NS        EW  
      Medium         Medium         Short              1           21        27         13           55          55          11        EW        NS  
      Medium         Medium         Short              1           21        18          5           55          55          11        NS        EW  
      Medium         Medium         Short              1           18        30          4           55          55          11        EW        NS  
      Medium         Medium         Short              1           43        22         10           55          55          11        EW        NS  
      Medium         Medium         Short              1           20        19          0           55          55          11        NS        EW  
      Medium         Medium         Moderate           1           41        17         50           59          59          12        NS        EW  
      Medium         Medium         Moderate           1           17        18         59           55          55          11        EW        NS  
      Medium         Medium         Moderate           1           45        28         36           76          76          15        NS        EW  
      Medium         Medium         Moderate           1           34        16         30           55          55          11        EW        NS  
      Medium         Medium         Moderate           1           45        24         49           76          76          15        NS        EW  
      Medium         Medium         Moderate           1           16        18         26           55          55          11        EW        NS  
      Medium         Medium         Moderate           1           33        23         22           55          55          11        EW        NS  
      Medium         Medium         Moderate           1           18        28         53           55          55          11        NS        EW  
      Medium         Medium         Moderate           1           34        13         22           55          55          11        NS        EW  
      Medium         Medium         Moderate           1           26        13         37           55          55          11        EW        NS  
      Medium         Medium         Long               1           45        22         61           76          76          15        NS        EW  
      Medium         Medium         Long               1           42        18         84           92          92          18        EW        NS  
      Medium         Medium         Long               1           36        25         62           60          60          12        NS        EW  
      Medium         Medium         Long               1           17        27         75           92          92          18        EW        NS  
      Medium         Medium         Long               1           45        25         75           92          92          18        NS        EW  
      Medium         Medium         Long               1           27        15         62           60          60          12        EW        NS  
      Medium         Medium         Long               1           30        12         70           82          82          16        EW        NS  
      Medium         Medium         Long               1           17        16         82           92          92          18        NS        EW  
      Medium         Medium         Long               1           39        11         73           88          88          18        NS        EW  
      Medium         Medium         Long               1           21        26         75           93          93          19        EW        NS  
      Medium         High           Short              1           27        39         14           55          55          11        EW        NS  
      Medium         High           Short              1           23        39          5           55          55          11        NS        EW  
      Medium         High           Short              1           29        33          8           55          55          11        EW        NS  
      Medium         High           Short              1           24        31         20           69          69          14        NS        EW  
      Medium         High           Short              1           43        38          8           67          67          13        NS        EW  
      Medium         High           Short              1           34        36          9           55          55          11        EW        NS  
      Medium         High           Short              1           43        32         17           73          73          15        NS        EW  
      Medium         High           Short              1           36        34          5           55          55          11        EW        NS  
      Medium         High           Short              1           29        32         14           55          55          11        NS        EW  
      Medium         High           Short              1           25        37         19           70          70          14        EW        NS  
      Medium         High           Moderate           1           39        37         21           78          78          16        NS        EW  
      Medium         High           Moderate           1           25        32         37           76          76          15        EW        NS  
      Medium         High           Moderate           1           42        34         59           88          88          18        NS        EW  
      Medium         High           Moderate           1           20        40         55           93          93          19        EW        NS  
      Medium         High           Moderate           1           42        39         52           92          92          18        NS        EW  
      Medium         High           Moderate           1           26        33         43           83          83          17        EW        NS  
      Medium         High           Moderate           1           34        40         29           93          93          19        EW        NS  
      Medium         High           Moderate           1           17        38         23           85          85          17        NS        EW  
      Medium         High           Moderate           1           38        36         59           93          93          19        NS        EW  
      Medium         High           Moderate           1           36        32         60           76          76          15        EW        NS  
      Medium         High           Long               1           25        40         67           92          92          18        NS        EW  
      Medium         High           Long               1           17        35         70           92          92          18        EW        NS  
      Medium         High           Long               1           45        40         85           92          92          18        EW        NS  
      Medium         High           Long               1           44        31         79           92          92          18        NS        EW  
      Medium         High           Long               1           44        40         67           92          92          18        NS        EW  
      Medium         High           Long               1           18        33         64           83          83          17        EW        NS  
      Medium         High           Long               1           32        39         84           94          94          19        NS        EW  
      Medium         High           Long               1           23        31         77           92          92          18        EW        NS  
      Medium         High           Long               1           31        36         81           93          93          19        EW        NS  
      Medium         High           Long               1           16        33         74           89          89          18        NS        EW  
      Long           Low            Short              1           60        10         17           62          62          12        EW        NS  
      Long           Low            Short              1           49         7          8           55          55          11        NS        EW  
      Long           Low            Short              1           57        10          3           55          55          11        EW        NS  
      Long           Low            Short              1           52         0          1           55          55          11        NS        EW  
      Long           Low            Short              1           57         3         19           55          55          11        EW        NS  
      Long           Low            Short              1           53         3          3           55          55          11        NS        EW  
      Long           Low            Short              1           51         2          4           55          55          11        EW        NS  
      Long           Low            Short              1           50         0         10           55          55          11        NS        EW  
      Long           Low            Short              1           58         8         20           74          74          15        EW        NS  
      Long           Low            Short              1           54         4         15           55          55          11        NS        EW  
      Long           Low            Moderate           1           55        10         39           92          92          18        EW        NS  
      Long           Low            Moderate           1           46         5         48           55          55          11        NS        EW  
      Long           Low            Moderate           1           52         1         52           55          55          11        EW        NS  
      Long           Low            Moderate           1           50         4         40           55          55          11        NS        EW  
      Long           Low            Moderate           1           53         4         56           55          55          11        NS        EW  
      Long           Low            Moderate           1           50         7         51           68          68          14        EW        NS  
      Long           Low            Moderate           1           48         1         22           55          55          11        NS        EW  
      Long           Low            Moderate           1           47         2         27           55          55          11        EW        NS  
      Long           Low            Moderate           1           60         5         40           55          55          11        NS        EW  
      Long           Low            Moderate           1           48         7         43           68          68          14        EW        NS  
      Long           Low            Long               1           60         7         87           92          92          18        EW        NS  
      Long           Low            Long               1           57         4         62           60          60          12        NS        EW  
      Long           Low            Long               1           60         3         79           93          93          19        EW        NS  
      Long           Low            Long               1           59         4         82           93          93          19        NS        EW  
      Long           Low            Long               1           60         9         63           84          84          17        EW        NS  
      Long           Low            Long               1           58        10         61           92          92          18        NS        EW  
      Long           Low            Long               1           51         4         87           93          93          19        NS        EW  
      Long           Low            Long               1           47         8         70           78          78          16        EW        NS  
      Long           Low            Long               1           59         4         90           93          93          19        NS        EW  
      Long           Low            Long               1           55         9         72           84          84          17        EW        NS  
      Long           Medium         Short              1           55        23         16           58          58          12        EW        NS  
      Long           Medium         Short              1           53        19         12           55          55          11        NS        EW  
      Long           Medium         Short              1           54        20          7           55          55          11        NS        EW  
      Long           Medium         Short              1           50        19         19           70          70          14        EW        NS  
      Long           Medium         Short              1           54        20         10           55          55          11        EW        NS  
      Long           Medium         Short              1           51        15          3           55          55          11        NS        EW  
      Long           Medium         Short              1           56        22         18           66          66          13        NS        EW  
      Long           Medium         Short              1           50        27         16           58          58          12        EW        NS  
      Long           Medium         Short              1           55        11         19           70          70          14        EW        NS  
      Long           Medium         Short              1           49        25         12           55          55          11        NS        EW  
      Long           Medium         Moderate           1           49        15         48           90          90          18        EW        NS  
      Long           Medium         Moderate           1           47        29         33           83          83          17        NS        EW  
      Long           Medium         Moderate           1           52        19         28           92          92          18        EW        NS  
      Long           Medium         Moderate           1           49        21         40           90          90          18        NS        EW  
      Long           Medium         Moderate           1           60        17         26           92          92          18        EW        NS  
      Long           Medium         Moderate           1           47        13         53           83          83          17        NS        EW  
      Long           Medium         Moderate           1           59        20         28           92          92          18        EW        NS  
      Long           Medium         Moderate           1           54        29         31           92          92          18        NS        EW  
      Long           Medium         Moderate           1           56        14         37           93          93          19        NS        EW  
      Long           Medium         Moderate           1           47        25         30           83          83          17        EW        NS  
      Long           Medium         Long               1           53        11         76           92          92          18        EW        NS  
      Long           Medium         Long               1           50        14         61           93          93          19        NS        EW  
      Long           Medium         Long               1           60        21         76           93          93          19        EW        NS  
      Long           Medium         Long               1           59        17         71           92          92          18        NS        EW  
      Long           Medium         Long               1           50        26         72           92          92          18        EW        NS  
      Long           Medium         Long               1           47        18         65           83          83          17        NS        EW  
      Long           Medium         Long               1           59        25         75           93          93          19        NS        EW  
      Long           Medium         Long               1           49        17         80           92          92          18        EW        NS  
      Long           Medium         Long               1           56        11         86           92          92          18        NS        EW  
      Long           Medium         Long               1           52        19         88           93          93          19        EW        NS  
      Long           High           Short              1           58        39         13           93          93          19        EW        NS  
      Long           High           Short              1           54        34         18           87          87          17        NS        EW  
      Long           High           Short              1           51        40         15           92          92          18        NS        EW  
      Long           High           Short              1           49        37         18           88          88          18        EW        NS  
      Long           High           Short              1           52        35          4           93          93          19        NS        EW  
      Long           High           Short              1           50        31         11           66          66          13        EW        NS  
      Long           High           Short              1           57        36         12           93          93          19        EW        NS  
      Long           High           Short              1           51        39         11           93          93          19        NS        EW  
      Long           High           Short              1           54        34         16           88          88          18        NS        EW  
      Long           High           Short              1           53        39          5           93          93          19        EW        NS  
      Long           High           Moderate           1           49        33         42           88          88          18        NS        EW  
      Long           High           Moderate           1           49        36         33           92          92          18        EW        NS  
      Long           High           Moderate           1           58        35         55           93          93          19        NS        EW  
      Long           High           Moderate           1           47        40         30           92          92          18        EW        NS  
      Long           High           Moderate           1           59        33         49           92          92          18        EW        NS  
      Long           High           Moderate           1           49        37         25           92          92          18        NS        EW  
      Long           High           Moderate           1           54        32         22           80          80          16        NS        EW  
      Long           High           Moderate           1           47        38         31           92          92          18        EW        NS  
      Long           High           Moderate           1           60        38         24           92          92          18        NS        EW  
      Long           High           Moderate           1           46        38         49           92          92          18        EW        NS  
      Long           High           Long               1           46        38         90           92          92          18        NS        EW  
      Long           High           Long               1           46        38         89           92          92          18        EW        NS  
      Long           High           Long               1           60        37         77           93          93          19        EW        NS  
      Long           High           Long               1           56        32         72           91          91          18        NS        EW  
      Long           High           Long               1           60        33         67           92          92          18        NS        EW  
      Long           High           Long               1           59        31         81           92          92          18        EW        NS  
      Long           High           Long               1           53        34         85           92          92          18        EW        NS  
      Long           High           Long               1           52        38         86           93          93          19        NS        EW  
      Long           High           Long               1           58        39         64           92          92          18        EW        NS  
      Long           High           Long               1           50        31         75           92          92          18        NS        EW  

    QueueLevel    ArrivalLevel    WaitingLevel    GroupCount    AvgTotalGreen    AvgLeftTurn
    __________    ____________    ____________    __________    _____________    ___________

      Short          Low            Short             10             28               6     
      Short          Low            Moderate          10             38               8     
      Short          Low            Long              10             60              12     
      Short          Medium         Short             10             34               7     
      Short          Medium         Moderate          10             53              11     
      Short          Medium         Long              10             59              12     
      Short          High           Short             10             52              11     
      Short          High           Moderate          10             63              13     
      Short          High           Long              10             77              16     
      Medium         Low            Short             10             55              11     
      Medium         Low            Moderate          10             55              11     
      Medium         Low            Long              10             87              17     
      Medium         Medium         Short             10             55              11     
      Medium         Medium         Moderate          10             60              12     
      Medium         Medium         Long              10             83              16     
      Medium         High           Short             10             61              12     
      Medium         High           Moderate          10             86              17     
      Medium         High           Long              10             91              18     
      Long           Low            Short             10             58              12     
      Long           Low            Moderate          10             61              12     
      Long           Low            Long              10             86              17     
      Long           Medium         Short             10             60              12     
      Long           Medium         Moderate          10             89              18     
      Long           Medium         Long              10             92              18     
      Long           High           Short             10             89              18     
      Long           High           Moderate          10             91              18     
      Long           High           Long              10             92              18     

</pre>
<img vspace="5" hspace="5" src="./Scenarios_01.png" alt=""> <p class="footer">
<br>
<a href="https://www.mathworks.com/products/matlab/">Published with MATLAB R2025b</a>
<br>
</p>
</div>
<!--
##### SOURCE BEGIN #####
clc; clear; close all;

fis = mamfis('Name', 'Special Problem');

fis = addInput(fis, [0 60], 'Name', 'Queue');
fis = addMF(fis, 'Queue', 'trimf', [0 0 15], 'Name', 'Short');
fis = addMF(fis, 'Queue', 'trimf', [10 30 50], 'Name', 'Medium');
fis = addMF(fis, 'Queue', 'trimf', [40 60 60], 'Name', 'Long');

fis = addInput(fis, [0 40], 'Name', 'Arrival');
fis = addMF(fis, 'Arrival', 'trimf', [0 0 10], 'Name', 'Low');
fis = addMF(fis, 'Arrival', 'trimf', [5 20 35], 'Name', 'Medium');
fis = addMF(fis, 'Arrival', 'trimf', [30 40 40], 'Name', 'High');

fis = addInput(fis, [0 90], 'Name', 'Waiting');
fis = addMF(fis, 'Waiting', 'trimf', [0 0 25], 'Name', 'Short');
fis = addMF(fis, 'Waiting', 'trimf', [15 45 75], 'Name', 'Moderate');
fis = addMF(fis, 'Waiting', 'trimf', [60 90 90], 'Name', 'Long');

fis = addOutput(fis, [0 120], 'Name', 'TotalGreen');
fis = addMF(fis, 'TotalGreen', 'trapmf', [10 10 30 40], 'Name', 'Short');
fis = addMF(fis, 'TotalGreen', 'trapmf', [30 40 70 80], 'Name', 'Medium');
fis = addMF(fis, 'TotalGreen', 'trapmf', [60 80 120 120], 'Name', 'Long');

fis.DefuzzificationMethod = 'centroid';

fuzzyrules = [
    1 1 1 1; 1 1 2 1; 1 1 3 2;
    1 2 1 1; 1 2 2 2; 1 2 3 2;
    1 3 1 2; 1 3 2 2; 1 3 3 3;
    2 1 1 2; 2 1 2 2; 2 1 3 3;
    2 2 1 2; 2 2 2 2; 2 2 3 3;
    2 3 1 2; 2 3 2 3; 2 3 3 3;
    3 1 1 2; 3 1 2 2; 3 1 3 3;
    3 2 1 2; 3 2 2 3; 3 2 3 3;
    3 3 1 3; 3 3 2 3; 3 3 3 3
];

for i = 1:size(fuzzyrules, 1)
    fis = addRule(fis, [fuzzyrules(i,:) 1 1]);  
end

iterations = 5;
scenarios = 27;
leftshare = 0.2;  
queue_ranges = [0 15; 16 45; 46 60];      
arrival_ranges = [0 10; 11 30; 31 40];    
waiting_ranges = [0 20; 21 60; 61 90];
queue_label = {'Short', 'Medium', 'Long'};
arrival_label = {'Low', 'Medium', 'High'};
waiting_label = {'Short', 'Moderate', 'Long'};

results = table('Size', [0 12],...
    'VariableTypes', {'categorical', 'categorical', 'categorical', 'double', 'double', 'double', 'double', 'double', 'double', 'double', 'categorical', 'categorical'},...
    'VariableNames', {'QueueLevel', 'ArrivalLevel', 'WaitingLevel', 'Intersection', 'Queue', 'Arrival', 'Waiting', 'TotalGreen', 'Through', 'LeftTurn', 'First', 'Second'});

for s = 1:scenarios
    [W, A, Q] = ind2sub([3, 3, 3], s);

    for iter = 1:iterations
        QL_NS1 = randi(queue_ranges(Q, :));
        QL_EW1 = randi(queue_ranges(Q, :));
        AR_NS1 = randi(arrival_ranges(A, :));
        AR_EW1 = randi(arrival_ranges(A, :));
        WT_NS1 = randi(waiting_ranges(W, :));
        WT_EW1 = randi(waiting_ranges(W, :));
    
        if QL_NS1 >= QL_EW1
            First = 'NS'; 
            Second = 'EW';
            QL_first = QL_NS1; 
            AR_first = AR_NS1; 
            WT_first = WT_NS1;
            QL_second = QL_EW1; 
            AR_second = AR_EW1; 
            WT_second = WT_EW1;
        else
            First = 'EW'; 
            Second = 'NS';
            QL_first = QL_EW1; 
            AR_first = AR_EW1; 
            WT_first = WT_EW1;
            QL_second = QL_NS1; 
            AR_second = AR_NS1; 
            WT_second = WT_NS1;
        end
    
        TG_first = round(evalfis(fis,[QL_first AR_first WT_first]));
        LT_first = round(TG_first * leftshare);
        LT_first = max(LT_first, 3);
        TH_first = TG_first;
    
        TG_second = round(evalfis(fis,[QL_second AR_second WT_second]));
        LT_second = round(TG_second * leftshare);
        LT_second = max(LT_second, 3);
        TH_second = TG_second;
     
        results = [results; 
            {queue_label{Q}, arrival_label{A}, waiting_label{W}, 1, QL_first, AR_first, WT_first, TG_first, TH_first, LT_first, First, Second};
            {queue_label{Q}, arrival_label{A}, waiting_label{W}, 1, QL_second, AR_second, WT_second, TG_second, TH_second, LT_second, Second, First}];
       end
end

disp(results);

figure('Name','Traffic Signal Simulation (Intersection 1)','NumberTitle','off');
hold on;

intersection1 = results.Intersection == 1;

plot(find(intersection1), results.TotalGreen(intersection1),'b-o','LineWidth',1.5,'DisplayName','Total Green Intersection 1');
plot(find(intersection1), results.LeftTurn(intersection1),'bREPLACE_WITH_DASH_DASHs','LineWidth',1.5,'DisplayName','Left-Turn Intersection 1');

xlabel('Iteration');
ylabel('Time (seconds)');
title('Total Green and Left-Turn Allocation over Iterations');
legend('Location','best');
grid on;
hold off;

summary = varfun(@mean, results, ...
    'InputVariables', {'TotalGreen', 'LeftTurn'}, ...
    'GroupingVariables', {'QueueLevel', 'ArrivalLevel', 'WaitingLevel'});

summary.Properties.VariableNames{'mean_TotalGreen'} = 'AvgTotalGreen';
summary.Properties.VariableNames{'mean_LeftTurn'} = 'AvgLeftTurn';
summary.AvgTotalGreen = round(summary.AvgTotalGreen); 
summary.AvgLeftTurn  = round(summary.AvgLeftTurn);
disp(summary);

##### SOURCE END #####
-->


</body></html>